<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz</title>
</head>
<body>
  <h1>Quiz</h1>
  <div id="questions"></div>
  <button id="submit">Submit</button>
  <div id="score"></div>

  <script>
    const questions = [
      {
        question: "What is the capital of France?",
        options: ["Paris", "Berlin", "Madrid", "Rome"],
        correct: 0
      },
      {
        question: "What is 2 + 2?",
        options: ["3", "4", "5", "22"],
        correct: 1
      },
      {
        question: "Which language runs in the browser?",
        options: ["Java", "Python", "C", "JavaScript"],
        correct: 3
      },
      {
        question: "Which tag is used to create a link in HTML?",
        options: ["<link>", "<a>", "<href>", "<src>"],
        correct: 1
      },
      {
        question: "CSS stands for?",
        options: [
          "Cascading Style Sheets",
          "Computer Style Sheets",
          "Colorful Style Sheets",
          "Creative Style Sheets"
        ],
        correct: 0
      }
    ];

    const questionsContainer = document.getElementById("questions");
    const submitBtn = document.getElementById("submit");
    const scoreDisplay = document.getElementById("score");

    // Load previous progress or score
    let progress = JSON.parse(sessionStorage.getItem("progress")) || {};
    const savedScore = localStorage.getItem("score");

    if (savedScore !== null) {
      scoreDisplay.innerText = `Your score is ${savedScore} out of ${questions.length}.`;
    }

    // Render questions and restore selections
    questions.forEach((q, index) => {
      const qDiv = document.createElement("div");
      qDiv.innerHTML = `<p><strong>${index + 1}. ${q.question}</strong></p>`;
      
      q.options.forEach((opt, optIndex) => {
        const id = `q${index}_opt${optIndex}`;
        const isChecked = progress[index] !== undefined && progress[index] === optIndex;

        const label = document.createElement("label");
        label.htmlFor = id;
        label.innerHTML = `
          <input type="radio" name="q${index}" id="${id}" value="${optIndex}" ${isChecked ? "checked" : ""}>
          ${opt}
        `;
        qDiv.appendChild(label);
        qDiv.appendChild(document.createElement("br"));
      });

      questionsContainer.appendChild(qDiv);
    });

    // Save user selection in session storage
    questionsContainer.addEventListener("change", (e) => {
      const name = e.target.name; // "q0", "q1" etc
      const qIndex = parseInt(name.replace("q", ""));
      const selected = parseInt(e.target.value);
      progress[qIndex] = selected;
      sessionStorage.setItem("progress", JSON.stringify(progress));
    });

    // Submit handler
    submitBtn.addEventListener("click", () => {
      let score = 0;
      questions.forEach((q, i) => {
        if (progress[i] === q.correct) {
          score++;
        }
      });

      scoreDisplay.innerText = `Your score is ${score} out of ${questions.length}.`;
      localStorage.setItem("score", score);
    });
  </script>
</body>
</html>
